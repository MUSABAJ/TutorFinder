{% load static %}
 
<script src="{% static 'js/script.js' %}"></script>

<nav class="dashboard-nav">
    <div class="nav-container">
      <div class="nav-brand">
        <img src="{% static 'img/icon.png' %}" alt="PI">
        <h2>TEMAR</h2>
          <div class="dashboard-header">
            <h3>Selam, {{request.user}}</h3>
        </div>
      </div>
   
      <div class="nav-user">
       {% if request.user.role == 'student' %}
        <div class="nav-search">
          <i class="fas fa-search"></i>
          <input type="search" placeholder="Search tutors..." name="search_text"
          value = "{{search_text}}  "
          hx-get="{% url 'main_search' %}"
          hx-trigger="keyup changed delay:500ms"
          hx-target=".main-view-top"
           >
          
        </div>
        {% endif %}
  
        <div class="user-info">
          <img src="/static{{request.user.avatar.url}}" alt="Profile" id="user-avatar" class="user-avatar">
          <div id="profile-dropdown" class="dropdown-container">
            <div style="display: flex; gap: 10px;padding-left: 0.5rem;">
            <img src="/static{{request.user.avatar.url}}" alt="Profile" id="user-avatar" class="dropdown-avatar">
              <div  style="display: flex; color: var(--text-muted); font-size: small; flex-direction: column;">
                <span><b>{{request.user}}</b></span>
                <span>{{request.user.email}}</span>
              </div>
          </div>
            <a href="{% url 'my_profile' %}" style="display: flex; gap: 13px; align-items:center;"><i class="fas fa-gear" ></i> Account setting</a>
             <a href="{% url 'logout' %}"style="display: flex; gap: 13px; align-items:center;"><i class="fas fa-sign-out" ></i>Log Out</a>
            <hr>
        <button type="button" id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode"><i class="fas fa-moon"></i><span>Light</span></button>
          </div><p style="display:flex; flex-direction:column;">
          <b class="user-name">{{ request.user.first_name|default:"User" }} {{ request.user.last_name }}</b>
          
          <small class="user-role">{{ request.user.role}}</small></p>
        </div>
      </div>
    </div>
  </nav>
  <script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
      document.documentElement.classList.toggle("dark")
      const mode = document.documentElement.classList.contains("dark") ? "dark" : "light"
      localStorage.setItem("theme", mode)
      updateToggleUi()
    })
  </script>