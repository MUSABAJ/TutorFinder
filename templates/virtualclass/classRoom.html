
{%load static%} 
 <script src='{% static "js/external_api.js" %}'></script>

<script src="https://meet.hosttech.de/external_api.js"></script>

     <title>virtualRoom</title>
  
<body>

    <h2> virtual calss room</h2>
    <div id="meet"> </div>

</body>
<script> 
    const domain = "hosttech.chat"
     const options = {
        roomName: "{{jitsi_config.room_name}}",
        width: "100%",
        height: "75%",
        parentNode: document.querySelector('#meet'),
        userInfo:{displayName:"{{username}}"}
    },
    configOverwrite = {

    startWithAudioMuted: "{{jitsi_config.configOverwrite.startWithAudioMuted}}",
    startWithVideoMuted: "{{jitsi_config.configOverwrite.startWithVideoMuted}}",
    prejoinPageEnabled:false,
    }  ,
    interfaceConfigOverwrite ={
        TOOLBAR_BUTTONS:[
        'microphone', 'camera','closedcaption','desktop','fullscreen',
                'fodeviceselection', 'hangup','profile', 'chat', 'etherpad','sharevideo',
                'settings','raisehand','videoquality','filmstrip','invite', 'feedback','stats',
                'shortcuts','tileview','videobackgroundblur', 'download', 'help', 'mute-everyone', 'mute-video-everyone', 
           
        ],
            'SHOW_JITSI_WATERMARK':false,
            'SHOW_WATERMARK_FOR_GUEST':false,
    }

     
    const api = new JitsiMeetExternalAPI(domain,options);
    api.addEventListener('participantLeft', (event) => {
            console.log('Participant left:', event);
            // If instructor leaves, end class for students
           
        });
    api.addEventListener('readyToClose' , (event)=>{
            console.log('Participant left:', event);
            let  id={{session.id}}
             window.location.href = "{% url 'feedback' session.base_session.id  %}"

    }) 
    
 </script>
</html>